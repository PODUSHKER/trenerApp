<section class="form-section course-detail-section">
    <div class="course-header">
        <h2>{{course.title}}</h2>
        <p class="course-detail-description">{{course.description}}</p>
        <button class="btn-primary" onclick="openModuleForm()">+ –î–æ–±–∞–≤–∏—Ç—å –º–æ–¥—É–ª—å</button>
    </div>

    <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–æ–¥—É–ª—è -->
    <div id="newModuleForm" style="display: none;">
        <h3>–ù–æ–≤—ã–π –º–æ–¥—É–ª—å</h3>
        <form method="POST" id="addModuleForm">
            <input type="text" name="title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è" required />
            <textarea name="description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥—É–ª—è" rows="3"></textarea>
            <button type="submit">–î–æ–±–∞–≤–∏—Ç—å</button>
        </form>
    </div>

    <!-- –°–ø–∏—Å–æ–∫ –º–æ–¥—É–ª–µ–π -->
    {{#each modules}}
    <div class="module-item" id="module_{{this.id}}">
        <div class="module-header">
            <h3>{{this.title}}</h3>
            <p>{{this.description}}</p>
            <button class="btn-secondary" onclick="openLessonForm({{this.id}})">+ –£—Ä–æ–∫</button>
        </div>

        <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —É—Ä–æ–∫–∞ –¥–ª—è –º–æ–¥—É–ª—è -->
        <div class="new-lesson-form" id="newLessonForm_{{this.id}}" style="display: none;">
            <h4>–ù–æ–≤—ã–π —É—Ä–æ–∫</h4>
            <form method="POST" onsubmit="submitLesson(event, {{this.id}})">
                <input type="text" name="title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —É—Ä–æ–∫–∞" required />
                <textarea name="content" placeholder="–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —É—Ä–æ–∫–∞" rows="4" required></textarea>
                <button type="submit">–î–æ–±–∞–≤–∏—Ç—å</button>
            </form>
        </div>

        <!-- –°–ø–∏—Å–æ–∫ —É—Ä–æ–∫–æ–≤ -->
        <div class="lesson-list">
            {{#each this.lessons}}
            <div class="lesson-item" id="lesson_{{this.id}}">
                <div class="lesson-header" onclick="toggleLesson(this)">
                    <h4>{{this.title}}</h4>
                    <span class="toggle-arrow">‚ñº</span>
                </div>
                <div class="lesson-content">
                    <textarea data-id="{{this.id}}" class="lesson-edit-area">{{this.content}}</textarea>
                    <span id="success-msg" style="color:#0f0"></span>
                    <div class="lesson-actions">
                        <button onclick="updateLesson({{this.id}})">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        <button onclick="deleteLesson({{this.id}})">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                    </div>
                </div>
            </div>
            {{/each}}
        </div>
    </div>
    {{/each}}
</section>

<script src="/scripts/course.js"></script>